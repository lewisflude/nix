# direnv configuration for nix-config
# This file enables automatic loading of the Nix development environment
# when entering the repository directory.
#
# Prerequisites:
# 1. Install direnv: nix-env -iA nixpkgs.direnv
# 2. Add to your shell rc file:
#    - Bash: eval "$(direnv hook bash)"
#    - Zsh: eval "$(direnv hook zsh)"
# 3. Run: direnv allow
#
# More info: https://direnv.net/

# Use the flake-based development shell
use flake

# Optional: Watch additional files for changes
# watch_file flake.lock
# watch_file modules/**/*.nix

# Set environment variables for development
export NIX_CONFIG_DIR="$(pwd)"
export FLAKE_DIR="$(pwd)"

# Add scripts to PATH
PATH_add scripts/utils
PATH_add scripts/maintenance

# Enable strict mode for better error detection
# export NIXPKGS_ALLOW_UNFREE=1

# Log when environment loads (redirect to stderr to avoid Powerlevel10k instant prompt warnings)
echo "âœ“ Nix configuration development environment loaded" >&2
echo "  Available scripts:" >&2
echo "    - benchmark-rebuild.sh - Performance monitoring" >&2
echo "    - diff-config.sh - Configuration preview" >&2
echo "    - new-module.sh - Module scaffolding" >&2
echo "    - update-flake.sh - Update flake inputs" >&2
