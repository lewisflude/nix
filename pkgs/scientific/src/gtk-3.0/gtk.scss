/**
 * Signal GTK Theme - GTK 3.0
 * Signal: Perception, engineered.
 */

@import '../colors';
@import '../mixins';

/* Color Definitions for GTK 3 */
@define-color theme_base_color #{$theme-base-color};
@define-color theme_bg_color #{$theme-bg-color};
@define-color theme_fg_color #{$theme-fg-color};
@define-color theme_text_color #{$theme-text-color};
@define-color theme_selected_bg_color #{$theme-selected-bg-color};
@define-color theme_selected_fg_color #{$theme-selected-fg-color};
@define-color insensitive_bg_color #{$insensitive-bg-color};
@define-color insensitive_fg_color #{$insensitive-fg-color};
@define-color borders #{$borders};
@define-color warning_color #{$warning-color};
@define-color error_color #{$error-color};
@define-color success_color #{$success-color};

/* Additional Signal palette colors */
@define-color accent_color #{$accent-special};
@define-color accent_dim_color #{$accent-special-dim};
@define-color focus_color #{$accent-primary};
@define-color focus_dim_color #{$accent-primary-dim};
@define-color divider_color #{$divider-primary};
@define-color divider_subtle_color #{$divider-subtle};
@define-color text_secondary_color #{$text-secondary};
@define-color text_tertiary_color #{$text-tertiary};

/* Base Styling */
* {
  background-clip: padding-box;
  -GtkToolButton-icon-spacing: 4;
  -GtkTextView-error-underline-color: @error_color;
  -GtkCheckButton-indicator-size: 16;
  -GtkCheckMenuItem-indicator-size: 16;
  -GtkScrolledWindow-scrollbar-spacing: 0;
  -GtkScrolledWindow-scrollbars-within-bevel: 1;
  -GtkToolItemGroup-expander-size: 11;
  -GtkTreeView-expander-size: 11;
  -GtkTreeView-horizontal-separator: 4;
  -GtkMenu-horizontal-padding: 0;
  -GtkMenu-vertical-padding: 0;
  -GtkWidget-link-color: @focus_color;
  -GtkWidget-visited-link-color: @accent_color;
  -GtkWidget-focus-padding: 2;
  -GtkWidget-focus-line-width: 1;
  @include focus-ring($accent-primary);
}

/* Windows */
window {
  background-color: $surface-base;
  color: $text-primary;
}

.background {
  background-color: $surface-base;
  color: $text-primary;
}

/* HeaderBars */
headerbar {
  @include headerbar;

  button {
    background-color: transparent;
    color: $text-primary;
    border: none;
    border-radius: 6px;
    padding: 6px 12px;

    &:hover {
      background-color: lighten($surface-subtle, 10%);
    }

    &:active,
    &:checked {
      background-color: $accent-primary;
      color: $white;
    }
  }
}

/* Buttons */
button {
  @include button-base;

  &:hover {
    @include button-hover;
  }

  &:active,
  &:checked {
    @include button-active;
  }

  &:disabled {
    background-color: $insensitive-bg-color;
    color: $insensitive-fg-color;
    border-color: $borders;
  }

  &.suggested-action {
    background-color: $accent-primary;
    color: $white;
    border-color: $accent-primary;

    &:hover {
      background-color: lighten($accent-primary, 10%);
    }

    &:active {
      background-color: darken($accent-primary, 10%);
    }
  }

  &.destructive-action {
    background-color: $accent-danger;
    color: $white;
    border-color: $accent-danger;

    &:hover {
      background-color: lighten($accent-danger, 10%);
    }

    &:active {
      background-color: darken($accent-danger, 10%);
    }
  }
}

/* Entry Fields */
entry {
  @include entry-base;

  &:focus {
    @include entry-focus;
  }

  &:disabled {
    background-color: $insensitive-bg-color;
    color: $insensitive-fg-color;
    border-color: $borders;
  }
}

/* Menus and Popovers */
menu,
.menu,
popover.menu {
  @include popover;
  padding: 4px;
}

menuitem,
.menuitem {
  @include menuitem;
}

separator,
.separator {
  background-color: $borders;
  min-height: 1px;
  margin: 4px 0;
}

/* Dialogs */
dialog {
  @include dialog;
}

/* Cards */
.card {
  @include card;
}

/* Lists */
list,
.list {
  background-color: $surface-base;
  color: $text-primary;

  row {
    background-color: transparent;
    color: $text-primary;
    padding: 8px;

    &:hover {
      background-color: $surface-elevated;
    }

    &:selected {
      background-color: $accent-primary;
      color: $white;
    }
  }
}

/* Scrollbars */
scrollbar {
  background-color: transparent;

  slider {
    background-color: rgba($text-secondary, 0.3);
    border-radius: 10px;
    min-width: 6px;
    min-height: 6px;

    &:hover {
      background-color: rgba($text-secondary, 0.5);
    }

    &:active {
      background-color: rgba($text-secondary, 0.7);
    }
  }
}

/* Notebook Tabs */
notebook {
  background-color: $surface-base;

  header {
    background-color: $surface-subtle;
    border-bottom: 1px solid $borders;

    tabs {
      tab {
        background-color: transparent;
        color: $text-secondary;
        border: none;
        padding: 8px 16px;

        &:hover {
          background-color: $surface-elevated;
          color: $text-primary;
        }

        &:checked {
          background-color: $surface-base;
          color: $accent-primary;
          border-bottom: 2px solid $accent-primary;
        }
      }
    }
  }
}

/* Tooltips */
tooltip {
  background-color: $surface-elevated;
  color: $text-primary;
  border: 1px solid $borders;
  border-radius: 6px;
  padding: 6px 10px;
}

/* Check and Radio Buttons */
checkbutton,
radiobutton {
  check,
  radio {
    background-color: $surface-base;
    border: 1px solid $borders;
    border-radius: 4px;
    min-width: 16px;
    min-height: 16px;

    &:checked {
      background-color: $accent-primary;
      border-color: $accent-primary;
      -gtk-icon-source: -gtk-icontheme("object-select-symbolic");
      color: $white;
    }

    &:disabled {
      background-color: $insensitive-bg-color;
      border-color: $borders;
    }
  }
}

radiobutton radio {
  border-radius: 50%;
}

/* Switches */
switch {
  background-color: $surface-elevated;
  border: 1px solid $borders;
  border-radius: 12px;
  min-height: 24px;

  slider {
    background-color: $white;
    border-radius: 50%;
    min-width: 20px;
    min-height: 20px;
  }

  &:checked {
    background-color: $accent-primary;
    border-color: $accent-primary;
  }

  &:disabled {
    background-color: $insensitive-bg-color;
    border-color: $borders;
  }
}

/* Progress Bars */
progressbar {
  background-color: $surface-elevated;
  border-radius: 4px;

  trough {
    background-color: $surface-elevated;
    border-radius: 4px;
    min-height: 6px;
  }

  progress {
    background-color: $accent-primary;
    border-radius: 4px;
    min-height: 6px;
  }
}

/* Spinners */
spinner {
  color: $accent-primary;
  -gtk-icon-source: -gtk-icontheme("process-working-symbolic");
}
