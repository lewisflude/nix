Follow all coding guidelines in CLAUDE.md and CONVENTIONS.md

CRITICAL RULES:
- System services/hardware → modules/nixos/ or modules/darwin/
- User apps/dotfiles → home/common/apps/
- NEVER use 'with pkgs;' - always use explicit pkgs.packageName
- Use constants from lib/constants.nix for ports and paths
- NEVER run: nh os switch, sudo nixos-rebuild switch, sudo darwin-rebuild switch
- ALWAYS format .nix files with 'nix fmt' after editing
- Use 'nix run .#new-module' to create new modules (don't create manually)
- Follow conventional commits: feat/fix/refactor/docs (see docs/DX_GUIDE.md)

Before suggesting commits:
1. Format code: nix fmt or treefmt
2. Validate flake: nix flake check (suggest to user)
3. Review git diff for unintended changes

See projectBrief.md and techContext.md for detailed project information.
